{% extends "base.html" %}
{% import "blog.jinja" as blog %}

{% block head %}
	{{ super() }}
	{% if post %}
	<meta property="og:type" content="article" />
	<meta property="article:section" content="{{ post.post_metadata.section }}" />
	<meta property="article:published_time" content="{{ post.post_metadata.date.iso_date }}" />
	{% for tag in post.post_metadata.tags %}
		<meta property="article:tag" content="{{ tag }}" />
	{% endfor %}
	{% endif %}
	<link href="{{ static_url }}github-markdown-processed.min.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="{{ static_url }}github.min.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="{{ static_url }}blog-post.min.css" media="screen" rel="stylesheet" type="text/css" />  
{% endblock %}


{% block prefix %}{{ super() }}{% if post %}article: http://ogp.me/ns/article#{% endif %}{% endblock %}
{% block title %}{% if post %}{{post.title}}{% else %}Post not found{% endif %}{% endblock %} 
{% block description %}{% if post %}{{ post.post_metadata.description }}{% else %}This post has either been swept under the rug or has never existed in the first place. Let your imagination go wild! :){% endif %}{% endblock %}

{% block image %}{% if post and post.images %}{{ post.images[0].url }}{% else %}{{ super() }}{% endif %}{% endblock %}

{% block content %}
{% if post %}
{{ blog.back_arrow("/blog#post-" + post.name) }}
<article class="content">
	<div class="title-container">
		<h1>{{post.title}}</h1>
		<div class="date">{{ post.post_metadata.date.pretty_date }}</div>
		{{ blog.tag_list(post) }}
	</div>
	<div class="markdown-body">
		{{post.markdown}}
	</div>
	<div class="license">
		<a href="{{ post.post_metadata.license.description_url }}">
			<img src="{{ post.post_metadata.license.image_url }}" />
			{{post.post_metadata.license.name}}
		</a>
		{% if post.has_code %}
		(only applies to text, code license: <a href="https://opensource.org/licenses/MIT">MIT</a>)
		{% endif %}
	</div>
</article>
<script src="https://utteranc.es/client.js"
		repo="PhilipTrauner/philip-trauner.me"
		issue-term="og:title"
		crossorigin="anonymous"
		async>
</script>
{% else %}
<div class="content warning">
	<svg height="32" width="32" viewBox="0 0 16 16">
		<use xlink:href="#warning"></use>
	</svg>
	<p>Could not find post :(</p>
</div>
{% endif %}
{% endblock %}